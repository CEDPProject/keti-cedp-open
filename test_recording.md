# ë°ì´í„° í†µí•© í”Œë«í¼ í…ŒìŠ¤íŠ¸ ê¸°ë¡

## í…ŒìŠ¤íŠ¸ ëª©í‘œ
ipython í™˜ê²½ì—ì„œ ë°ì´í„° í†µí•© í”Œë«í¼ì˜ ì „ì²´ í”Œë¡œìš°ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ê²€ì¦

## í…ŒìŠ¤íŠ¸ ì¡°ê±´
- **ê¸°ì¤€ ë°ì´í„°**: farm_protectedHorticulture_westernVegetables_paprika / environment_knu_n
  - FRM_ID: F00012
  - ZN_ID: 1êµ¬ì—­
  
- **í†µí•©í•  ë°ì´í„°**: farm_protectedHorticulture_fruitsAndVegetables_tomato / environment_knu_sgh
  - FARM_ID_CODE: A00259
  
- **í†µí•© ì„¤ì •**:
  - ëª¨ë“  ì»¬ëŸ¼ ì„ íƒ
  - ê¸°ì¤€ ë°ì´í„°ì˜ ì£¼ê¸° ì‚¬ìš©
  - integration_results í´ë”ì— CSV/JSON ì €ì¥

## ìµœì¢… ê²°ê³¼

### âœ“ ì„±ê³µí•œ í•­ëª©:
1. **í™˜ê²½ ì„¤ì • ë° ëª¨ë“ˆ import**: ì™„ë£Œ
   - code/backend_data_integration.py ì‚¬ìš©
   - clust íŒ¨í‚¤ì§€ import ì„±ê³µ

2. **ê¸°ì¤€ ë°ì´í„° ì¡°íšŒ**: ì™„ë£Œ
   - ë²„í‚·/measurement ì¡°íšŒ ì„±ê³µ
   - 49,497í–‰ ë°ì´í„° í™•ì¸

3. **ìœ ì‚¬ ë°ì´í„° ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ**: ì™„ë£Œ
   - 6ê°œ ìœ ì‚¬ ë°ì´í„° ë°œê²¬
   - ëª©í‘œ tomato ë°ì´í„° ë¦¬ìŠ¤íŠ¸ì—ì„œ í™•ì¸

4. **ë°ì´í„° í†µí•© ì‹¤í–‰**: ì™„ë£Œ
   - backend ì½”ë“œ ìˆ˜ì • (ms_list_info ìˆœì„œ ìˆ˜ì •)
   - í†µí•© í”„ë¡œì„¸ìŠ¤ ì •ìƒ ì‹¤í–‰

5. **ê²°ê³¼ ì €ì¥**: ì™„ë£Œ
   - CSV íŒŒì¼ ì €ì¥: integration_20251107_120153_900cdf0b.csv (49,497í–‰)
   - JSON íŒŒì¼ ì €ì¥: integration_20251107_120153_900cdf0b.json
   - í˜•ì‹: ê¸°ì¡´ integration_20250929_121457_cc0e2e10.jsonê³¼ ë™ì¼

### âš  ë¯¸í•´ê²° ì´ìŠˆ:
1. **tomato ë°ì´í„° ë¯¸í¬í•¨** (ì›ì¸ í™•ì¸ ì™„ë£Œ)
   - **ë¬¸ì œ**: í†µí•© ê²°ê³¼ì— tomato ë°ì´í„°ê°€ í¬í•¨ë˜ì§€ ì•ŠìŒ
   - **ì›ì¸**: **ì‹œê°„ ë²”ìœ„ê°€ ì „í˜€ ê²¹ì¹˜ì§€ ì•ŠìŒ**
     - Paprika ë°ì´í„°: **2021-07-01 ~ 2022-10-25** (16ê°œì›”)
     - Tomato ë°ì´í„°: **2023-06-01 ~ 2023-09-01** (3ê°œì›”)
     - ê°„ê²©: ì•½ **7ê°œì›” ì°¨ì´**
   - **ì£¼ê¸°**: ë‘ ë°ì´í„° ëª¨ë‘ **10ë¶„ ê°„ê²©**ìœ¼ë¡œ ë™ì¼
   - **ê²°ë¡ **: 
     - ì£¼ê¸°ëŠ” ê°™ì§€ë§Œ ì‹œê°„ ë²”ìœ„ê°€ ë‹¬ë¼ì„œ í†µí•© ë¶ˆê°€
     - ìš”ì²­ ê¸°ê°„(2021-07-01 ~ 2022-10-25)ì— Tomato ë°ì´í„° ì—†ìŒ
   - **í•´ê²° ë°©ì•ˆ**:
     1. Tomato ë°ì´í„° ê¸°ê°„ìœ¼ë¡œ ë³€ê²½ (2023-06-01 ~ 2023-09-01)
     2. 2021-2022ë…„ì˜ ë‹¤ë¥¸ Tomato ë°ì´í„°ì…‹ ì°¾ê¸°
     3. Paprikaì™€ ì‹œê°„ì´ ê²¹ì¹˜ëŠ” ë‹¤ë¥¸ ì‘ë¬¼ ë°ì´í„° ì„ íƒ

## í…ŒìŠ¤íŠ¸ ë‹¨ê³„

### 1ë‹¨ê³„: í™˜ê²½ ì„¤ì • ë° ì´ˆê¸°í™” (ì§„í–‰ì¤‘)
- ë‚ ì§œ: 2025-11-07
- ìƒíƒœ: ì§„í–‰ì¤‘
- ë‚´ìš©: test_recording.md íŒŒì¼ ìƒì„± ì™„ë£Œ

### 3ë‹¨ê³„: ë°ì´í„° í†µí•© ì‹¤í–‰ (ì™„ë£Œ)
- ë‚ ì§œ: 2025-11-07
- ìƒíƒœ: ë¶€ë¶„ ì„±ê³µ
- ê²°ê³¼: í†µí•© ì‹¤í–‰ ì„±ê³µí–ˆìœ¼ë‚˜ 1ê°œ ë°ì´í„°ì…‹ë§Œ ë°˜í™˜ë¨
  - ê¸°ì¤€ ë°ì´í„°(paprika): 49,497í–‰
  - í†µí•© ë°ì´í„°(tomato): í¬í•¨ë˜ì§€ ì•ŠìŒ
  - ì›ì¸: tomato ë°ì´í„°ê°€ í•´ë‹¹ ê¸°ê°„ì— ì—†ê±°ë‚˜ íƒœê·¸ ì¡°ê±´ì´ ë§ì§€ ì•ŠìŒ

### 4ë‹¨ê³„: ë°ì´í„° ì €ì¥ ì§„í–‰ (ì™„ë£Œ)
- CSV/JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ í…ŒìŠ¤íŠ¸
- ì €ì¥ ID: integration_20251107_120153_900cdf0b
- CSV: 49,497í–‰, 8ì»¬ëŸ¼
- JSON: ë©”íƒ€ë°ì´í„° í¬í•¨

### 5ë‹¨ê³„: ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- ë‚ ì§œ: 2025-11-07
- ìƒíƒœ: ì™„ë£Œ (ë¶€ë¶„ì  ì„±ê³µ)
- ëª¨ë“  í”Œë¡œìš° ì •ìƒ ì‹¤í–‰ë¨
- tomato ë°ì´í„° ë¯¸í¬í•¨ ì´ìŠˆëŠ” ë°ì´í„° ë¶€ì¬ë¡œ íŒë‹¨

---

## ë¬¸ì œ ë° í•´ê²° ê¸°ë¡

### ë¬¸ì œ 1: ë²„í‚·ê³¼ measurement ìˆœì„œ ì˜¤ë¥˜
- **ë°œìƒ ì‹œì **: ê¸°ì¤€ ë°ì´í„° ì¡°íšŒ (ì…€ 4)
- **ì˜¤ë¥˜**: ApiException: (404) - could not find bucket
- **ì›ì¸**: bucketê³¼ measurement ë³€ìˆ˜ í• ë‹¹ ì˜¤ë¥˜
- **í•´ê²°**: 
  - ë²„í‚· ëª©ë¡ í™•ì¸ ì™„ë£Œ
  - ì •í™•í•œ ë²„í‚·ëª… í™•ì¸: farm_protectedHorticulture_westernVegetables_paprika
  - íƒœê·¸ ì •ë³´ ìˆ˜ì •: FRM_ID, ZN_ID, FARM_ID_CODE

### ë¬¸ì œ 2: backend_data_integration.pyì˜ ms_list_info ìˆœì„œ ì˜¤ë¥˜
- **ë°œìƒ ì‹œì **: ë°ì´í„° í†µí•© ì‹¤í–‰
- **ì˜¤ë¥˜**: ApiException: (404) - could not find bucket "environment_knu_n"
- **ì›ì¸**: 
  - ms_list_infoê°€ [measurement, bucket, tags] ìˆœì„œë¡œ êµ¬ì„±ë¨
  - makeIntDataInfoSet í•¨ìˆ˜ëŠ” [bucket, measurement, tags] ìˆœì„œë¥¼ ê¸°ëŒ€
  - code/backend_data_integration.py 231-232ë²ˆ ì¤„ ìˆœì„œ ì˜¤ë¥˜
- **í•´ê²°**: 
  ```python
  # ìˆ˜ì • ì „
  ms_list_info = [
      [base_info['measurement'], base_info['bucket'], base_info['tags']],
      [selected_info['measurement'], selected_info['bucket'], selected_info['tags']]
  ]
  
  # ìˆ˜ì • í›„
  ms_list_info = [
      [base_info['bucket'], base_info['measurement'], base_info['tags']],
      [selected_info['bucket'], selected_info['measurement'], selected_info['tags']]
  ]
  ```

### ë¬¸ì œ 3: í†µí•© ë°ì´í„°ì— tomatoê°€ í¬í•¨ë˜ì§€ ì•ŠìŒ (ì›ì¸ í™•ì¸ ì™„ë£Œ)
- **ë°œìƒ ì‹œì **: ë°ì´í„° í†µí•© ì‹¤í–‰ ì™„ë£Œ í›„
- **í˜„ìƒ**: ì›ë³¸ ë°ì´í„°ì…‹ ìˆ˜ê°€ 1ê°œ (ê¸°ì¤€ ë°ì´í„°ë§Œ í¬í•¨)
- **ì›ì¸ ë¶„ì„**:
  - **ê·¼ë³¸ ì›ì¸**: ì‹œê°„ ë²”ìœ„ ë¶ˆì¼ì¹˜ (ê²¹ì¹˜ëŠ” êµ¬ê°„ ì—†ìŒ)
    - Paprika: 2021-07-01 ~ 2022-10-25 (16ê°œì›”)
    - Tomato: 2023-06-01 ~ 2023-09-01 (3ê°œì›”)
    - ê°„ê²©: 7ê°œì›” ê³µë°±
  - **ì£¼ê¸°**: ë‘ ë°ì´í„° ëª¨ë‘ 10ë¶„ ê°„ê²©ìœ¼ë¡œ ë™ì¼
  - **íƒœê·¸**: FARM_ID_CODE=A00259ëŠ” ìœ íš¨í•¨
- **ê²°ë¡ **: ì£¼ê¸°ëŠ” ê°™ì§€ë§Œ ì‹œê°„ ë²”ìœ„ê°€ ê²¹ì¹˜ì§€ ì•Šì•„ í†µí•© ë¶ˆê°€
- **ìƒíƒœ**: ì›ì¸ í™•ì¸ ì™„ë£Œ, ë°ì´í„° íŠ¹ì„±ìƒ í†µí•© ë¶ˆê°€ëŠ¥

### ë¬¸ì œ 4: ì»¬ëŸ¼ ì´ë¦„ ì˜¤ë¥˜ (EXT_SLR_RADIATON)
- **ë°œìƒ ì‹œì **: í•„ë“œ ì§€ì • í†µí•© ì‹¤í–‰ ì‹œ
- **ì˜¤ë¥˜**: KeyError: 'EXT_SLR_RADIATON'
- **ì›ì¸**: get_fields í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ì»¬ëŸ¼ëª…ì´ ì‹¤ì œ ë°ì´í„°ì™€ ë¶ˆì¼ì¹˜
- **í•´ê²°**: featuresë¥¼ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì „ë‹¬í•˜ì—¬ ëª¨ë“  í•„ë“œ ìë™ ì‚¬ìš©

## ì½”ë“œ ìˆ˜ì • ë‚´ì—­

### 1. backend_data_integration.py (line 230-232)
```python
# ms_list_info í˜•ì‹: [bucket, measurement, tags]
ms_list_info = [
    [base_info['bucket'], base_info['measurement'], base_info['tags']],
    [selected_info['bucket'], selected_info['measurement'], selected_info['tags']]
]
```

### 2. ë…¸íŠ¸ë¶ import ê²½ë¡œ ë³€ê²½
```python
# ./code/backend_data_integration.py ì‚¬ìš©
sys.path.insert(0, './code')
from backend_data_integration import (...)
```

## ê²°ë¡ 

âœ… **ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ëœ ê¸°ëŠ¥:**
- ë°ì´í„° ì¡°íšŒ ë° ì„ íƒ
- ìœ ì‚¬ ë°ì´í„° ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ ë° ì„ íƒ
- ë°ì´í„° í†µí•© ì‹¤í–‰
- CSV/JSON í˜•ì‹ ì €ì¥

âš ï¸ **ì¶”ê°€ ì‘ì—… í•„ìš”:**
- tomato ë°ì´í„°ì˜ ì‹¤ì œ ê¸°ê°„ ë° íƒœê·¸ í™•ì¸
- ë‹¤ë¥¸ ì‹œê°„ ë²”ìœ„ë‚˜ íƒœê·¸ ì¡°ê±´ìœ¼ë¡œ ì¬ì‹œë„
- ì—¬ëŸ¬ ë°ì´í„°ì…‹ì´ í¬í•¨ëœ í†µí•© ê²°ê³¼ í…ŒìŠ¤íŠ¸

ğŸ“ **ìƒì„±ëœ íŒŒì¼:**
- `4.ì´ì§ˆì  ë°ì´í„° í†µí•©.ipynb`: ì „ì²´ í…ŒìŠ¤íŠ¸ í”Œë¡œìš°
- `test_recording.md`: í…ŒìŠ¤íŠ¸ ê¸°ë¡
- `integration_results/integration_20251107_120153_900cdf0b.csv`: í†µí•© ê²°ê³¼ CSV
- `integration_results/integration_20251107_120153_900cdf0b.json`: í†µí•© ë©”íƒ€ë°ì´í„°

### ë¬¸ì œ 1: ë²„í‚·ê³¼ measurement ìˆœì„œ ì˜¤ë¥˜
- **ë°œìƒ ì‹œì **: ê¸°ì¤€ ë°ì´í„° ì¡°íšŒ (ì…€ 4)
- **ì˜¤ë¥˜**: ApiException: (404) - could not find bucket "farm_protectedHoriticulture_westernVegetables_paprika"
- **ì›ì¸**: 
  - base_bucket ë³€ìˆ˜ì— measurement ê°’ì„ í• ë‹¹
  - base_measurement ë³€ìˆ˜ì— bucket ê°’ì„ í• ë‹¹
  - data_interface.get_data_result() í˜¸ì¶œ ì‹œ bucket_nameê³¼ ms_nameì´ ë’¤ë°”ë€œ
- **í•´ê²°**: 
  - ë²„í‚· ëª©ë¡ í™•ì¸ ì™„ë£Œ
  - ì •í™•í•œ ë²„í‚·ëª…: farm_protectedHorticulture_westernVegetables_paprika, farm_protectedHorticulture_fruitsAndVegetables_tomato
  - íƒœê·¸ ì •ë³´ ìˆ˜ì •: FRM_ID, ZN_ID, FARM_ID_CODE

